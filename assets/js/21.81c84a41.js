(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{480:function(t,s){t.exports="data:image/jpeg;base64,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Zplllqm2v8w111zTHaFr2XSJNCDQCAEhPaMMTmwZWD1sGheqDz/8cKp3nHnmmdNiiy2WPv/5z/ewJ96qVAEhvdTKtndc//vf/6qtL7fffvvAILrdp+5aNn51f/bZZ9P7778/VQdmmWWWNO+886Z55pknzTjjjJ/q3Mcff5yefPLJ6nq2xBJLZHe+fs+4f2Gon5/9A72gZwJCega1E1sGVg+brrHGGumjjz4a8h3jpLfnnnum3XfffcQ9euONN9JJJ52UfvSjH1VPVYgjfim44oor0sILL5y22mqrEf9sL2yHgJDejjr1Yy9Hsk/dtWz8ZspGG22U3nzzzWE7sO2226a99947felLXxpoE+3jdfFL2IMPPpjd+fo977vvvvSFL3wh+/VeMH4CQnqGvRNbBlYPm9YhfbnllktzzDFH9c5TpkxJ//73v9Orr75a/f846e21114j6lUE/FjFiIvh0ksvXf2Ms846K/3qV79KP/nJT9J3v/vdEf1cL2qPgJDenlr1Y09z96m7lo3fLKkD85JLLjkQmON6FdequGbFMdNMM6Wbb755IKi/9dZbacMNN6xW2n/3u99ld15IzyZrzAuE9IxSOLFlYPWwaR3Sb7zxxmqLS+dx2WWXpXPPPTfNNtts6fe///2IerXzzjunf/3rX1OF9NNPPz395je/EdJHJNq+Fwnp7atZv/U4Z5+6a9n4zY46MF9++eXpa1/72lQd+fvf/54mTJhQLTKtsMIK6aqrrkozzDBD1SY+LY4/j2S7ipA+fvX+rO8spGcIOrFlYPWw6bRC+gcffDDw7Xq33XZbtTIR+wHjY79YlVhnnXWm6ukTTzyRXnzxxbT66qunBRZYIN15553ptNNOS6+//nr64Q9/WK2kR+CP8P/nP/85bbzxxmmDDTaoVjni7+OIvaKx2hF75ePvVlxxxbTuuuum2CdfH//4xz9S7BNcb731qtWTP/7xj+mll16qTszx87q5+auHxH3/VkJ630+BVgB0u0/dtWz8yjmtkB69iuvPjjvuWIXy4447Lm255ZbV9sq777672u4S14zOI64lEe6feeaZFHvX4wbiTTfddKpryHAhPa49jzzySHrqqafSF7/4xbTKKqukr3/965/6xeG5556rrmFx3XzhhReqrTcrr7zywC8Q46dZ/jsL6Rk1dmLLwOph02mF9Dj57LbbblOtpMeJKR5ZFielO+64Y6qeHnzwwen+++9Pp5xySnUyXHPNNaf69xG6F1xwwRQnrc6jXsWP1x5xxBHVSkjnEXvXzz777LT44otXf33sscdWH2dGP+KXh84jTsS//vWvP/WpQA9JvdUggc6QHk/QyDlWXXXVYZvH6mf80+2x0EILpfhnuCO2PeQc+vaJVmlu09un7lqW81/J6LadXkiPd/vZz35WXRd22WWXdOihh1Z72AfvSX/vvfeqb53905/+9KkO1gtJ9RddDRXSf/vb36aTTz75U/dzxcLTL37xizTrrLNWPzeewx/XyThXdP538tBDD434G29HV7TsnyakZ9TXiS0Dq4dN65B+4IEHVsE7jniG8CuvvJKuvPLK6iR00EEHDdw82m1IjxPb448/ng477LD0n//8J/385z+vVik+97nPpQsuuKAK8zvssEMVtFdaaaX08ssvVyfVeL+4+WfXXXdN7777brUSH6sd0bdbbrmlWlGvQ3r0NVba43Vx5/6JJ55YnZA322yzdMIJJ/RQ0VtNS6AzpOdKTZo0adiXXHzxxenSSy/t+kfGR+ETJ04ctn3nOaqbH6pvnyiV6DatfequZd381zE2bboJ6XGdOOaYY6pV7fjUdqiQfvXVV1fXlljUievb8ssvn/7617+m2EYT16tY+T7zzDOrQQwO6dEuziVxxEr9TjvtVF0zf/nLX1Z74/fYY48U19M46pAef47V89hLH78ExLP6HWMvIKRnGDuxZWD1sOm0nu4S3YgTXYShuBknjpyQHu273ZNer37E1pdTTz11QCA+qtxiiy2qLTNHHnlkFezrkB4nvOuuu26gbeyb33///attOYNX2HtI6q0GCQjp058SfoH4xKgpv3jF1pd999232spQH7FdLz4l/M53vjPwd48++uj0i6vFqAl0E9Iffvjh9OMf/3jgRtGhQnr8+2gXizmxqFMfsS3m8MMPr55EdtNNN1V/PTikx6fLMS+22267atW+PmKrzfbbb1/931iEmnvuuQdC+pe//OV0/fXXj2hP/Kjh9eEPEtIzii6kZ2D1sGkd0uNEVD9eKlawY4937NWLle04YcWKxPzzzz9mIT1WJGIFI95n8L6++gbWWGGPFfk6pP/gBz+oHu1YH7H1Ib7ie6R38feQva/eqjOkx77NnOP8888ftvmtt96a9ctYfGozra+Aj/sm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"},481:function(t,s,a){t.exports=a.p+"assets/img/3.2.e8302bee.jpg"},482:function(t,s,a){t.exports=a.p+"assets/img/3.3.bad1c955.jpg"},483:function(t,s,a){t.exports=a.p+"assets/img/3.4.be47e33a.jpg"},484:function(t,s,a){t.exports=a.p+"assets/img/11.6.a26260dc.jpg"},485:function(t,s,a){t.exports=a.p+"assets/img/12.2.f1b72a94.jpg"},486:function(t,s,a){t.exports=a.p+"assets/img/14.2.99e7f869.jpg"},487:function(t,s,a){t.exports=a.p+"assets/img/14.2_1.d21b76e3.jpg"},488:function(t,s,a){t.exports=a.p+"assets/img/15.1.ea73fca3.jpg"},489:function(t,s,a){t.exports=a.p+"assets/img/15.1_1.4e11487a.jpg"},490:function(t,s,a){t.exports=a.p+"assets/img/15.2.19c97282.jpg"},491:function(t,s,a){t.exports=a.p+"assets/img/15.2_1.b80b074d.jpg"},660:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"程序设计修炼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#程序设计修炼"}},[t._v("#")]),t._v(" 程序设计修炼")]),t._v(" "),s("h2",{attrs:{id:"痛了吗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#痛了吗"}},[t._v("#")]),t._v(" 痛了吗?")]),t._v(" "),s("ol",[s("li",[t._v("在工位上,吹着电扇听着歌,开开心心写新功能,已经测试通过的功能又报错了!!what???十,十一")]),t._v(" "),s("li",[t._v("我们写程序的时候,都是一个接口接一个实现,你有想过为什么你总是要有一个接口吗?这个接口存在的意义是什么?十一.")]),t._v(" "),s("li",[t._v("当你拆服务的时候,有没有遇到一个包拿走结果噼里啪啦报错,一个类一个类补?你有注意过程序中的pom吗?依赖关系.尤其是application-service,和mdd-repository-adapter,是谁依赖谁.为什么?十二")]),t._v(" "),s("li",[t._v("写代码时候,想依赖一些功能,但好像这个又不百分百符合我需求,咋办?我得改改,但是我怎么把这个能力拿到我得类里面呢?十三.")]),t._v(" "),s("li",[t._v("好不容易找到了一个方法,用起来却有点小问题,想调试看看哪里的问题,结果300行.痛吗?如果你不想,十四.")]),t._v(" "),s("li",[t._v("调用过别人接口吗?30个方法那种,怎么这么多?我不理解,这都啥,我需要吗?难受吗?十五")]),t._v(" "),s("li",[t._v("当你依赖不稳定方法,时而报错,因为依赖他,他的改变导致你的接口也变得不稳定,怀疑自己得了一觉醒来综合征,你暴躁吗?")])]),t._v(" "),s("h2",{attrs:{id:"十-软件设计的目的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#十-软件设计的目的"}},[t._v("#")]),t._v(" 十.软件设计的目的")]),t._v(" "),s("h3",{attrs:{id:"糟糕的程序差在哪里"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#糟糕的程序差在哪里"}},[t._v("#")]),t._v(" 糟糕的程序差在哪里?")]),t._v(" "),s("blockquote",[s("p",[t._v("        好与坏的程序设计最大的差别就体现在对于需求变更的处理上.好的程序员用优秀的设计从容面对需求变更,不好的程序设计害怕需求变更,因为每次需求变化都需要对代码进行修改,导致无尽的bug,夸张吗?糟糕的代码就是这么大威力.测试过程中bug无法收敛,越改越多,开发过程让开发者陷入迷宫,仅仅看,也会使阅读者头晕眼花.")])]),t._v(" "),s("h3",{attrs:{id:"_10-1糟糕的设计有多糟糕"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-1糟糕的设计有多糟糕"}},[t._v("#")]),t._v(" 10.1糟糕的设计有多糟糕.")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("僵化性")]),t._v(" "),s("p",[t._v("耦合严重,难以改动,牵一发动全身.")])]),t._v(" "),s("li",[s("p",[t._v("脆弱性")]),t._v(" "),s("p",[t._v("比僵化性更严重的问题,可能小小改动就会使程序莫名其妙出现问题,崩塌.僵化让改动由3小时变成3天,那么脆弱性让程序员抓狂,甚至怀疑人生.")])]),t._v(" "),s("li",[s("p",[t._v("牢固性")]),t._v(" "),s("p",[t._v("都在一块,软件无法拆分,想复用一部分,却无法分离出来.微服务架构大行其道,但是你的程序,真的拆的动吗?")])]),t._v(" "),s("li",[s("p",[t._v("粘滞性")]),t._v(" "),s("p",[t._v("需求变更时候,如果糟糕修改方案比优秀方案更加容易实施,那么就会向糟糕方向发展,即代码负债越来越多,随着一次次变更,变得千疮百孔.")])]),t._v(" "),s("li",[s("p",[t._v("晦涩性")]),t._v(" "),s("p",[t._v("代码首先是给人看的,其次才给机器执行,代码设计者一开始就有良好设计,后继者维护时候才有章法可循.")])])]),t._v(" "),s("h2",{attrs:{id:"十一-软件设计的开闭原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#十一-软件设计的开闭原则"}},[t._v("#")]),t._v(" 十一.软件设计的开闭原则")]),t._v(" "),s("h3",{attrs:{id:"_11-1什么是开闭原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-1什么是开闭原则"}},[t._v("#")]),t._v(" 11.1什么是开闭原则")]),t._v(" "),s("p",[t._v("对扩展开放,对修改关闭,大家都耳熟能详吧,但是我问下,有人真的做到了吗?如果你没有做到,那么可以来学习一下可以实现开闭的方法.")]),t._v(" "),s("h3",{attrs:{id:"_11-2一个违反开闭的简单例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-2一个违反开闭的简单例子"}},[t._v("#")]),t._v(" 11.2一个违反开闭的简单例子")]),t._v(" "),s("p",[t._v("设计一个通过按钮控制拨号的电话,核心对象按钮,拨号器.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(480),alt:"image-20220529160551624"}})]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dialer")]),t._v(" dialer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" btnVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SENDBUTTON")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dialer")]),t._v(" dialer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" btnVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dialer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dialer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("btnVal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" btnVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("press")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("btnVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                dialer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enterDigit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("btnVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SENDBUTTON")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                dialer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dial")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnsupportedOperationException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"没这个按钮"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dialer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enterDigit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" btnVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"输入了:"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("btnVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dial")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"拨号中.."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("我们可以创建数字按钮,发送按钮,这个代码可以正常运行并且完成需求,似乎没什么问题.这样的代码我们司空见惯,但是他违反了开闭原则,")]),t._v(" "),s("ol",[s("li",[t._v("当按钮种类变多的时候,我们要修改Button类,")]),t._v(" "),s("li",[t._v("当我们要用按钮控制密码锁时候,要修改Button类,")]),t._v(" "),s("li",[t._v("当想控制多个设备时候,还要修改Button类.")])]),t._v(" "),s("p",[t._v("似乎对Button做任何扩展,都要修改button类.这个Button非常僵硬,打断switch,非常脆弱,增加新的按钮类型,需要非常谨慎找到合适位置,稍微不小心就bug了,粗暴的说,当我们看到else,或者switch时候,基本可以断定他违反了开闭.")]),t._v(" "),s("p",[t._v("再有,这个Button难以复用,Button内部还有个Dialer呢,我到哪都要带着这个Dialer,太糟糕了,不管我需不需要Send,他也都带着这个功能.")]),t._v(" "),s("p",[t._v("很多设计开始并没有什么问题,但是当需求变更时候,就会发现各种僵硬,脆弱,当需求变更并发现当前设计的腐坏,就要及时重构,保持代码健壮,干净.")]),t._v(" "),s("h3",{attrs:{id:"_11-3策略模式实现开闭原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-3策略模式实现开闭原则"}},[t._v("#")]),t._v(" 11.3策略模式实现开闭原则")]),t._v(" "),s("p",[s("img",{attrs:{src:a(481),alt:"2"}})]),t._v(" "),s("p",[t._v("他们之间加了层ButtonService,当Button按下是,就调用ButtonService的buttonPress方法,实际就是调用了Dialer的buttonPress方法,")]),t._v(" "),s("p",[t._v("既完成了触发方法,又不依赖Dialer,这样,Button很容易复用到别的按按钮的场景.")]),t._v(" "),s("p",[t._v("而且,Button也去掉了switch,只需要继续传下去btnVal就可以了.增加新的按钮,也不用改Button.")]),t._v(" "),s("h3",{attrs:{id:"_11-4适配器实现开闭原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-4适配器实现开闭原则"}},[t._v("#")]),t._v(" 11.4适配器实现开闭原则")]),t._v(" "),s("p",[t._v("Button是不用动了,实现开闭了,但是Dialer一变化还得动啊,怎么办??")]),t._v(" "),s("p",[t._v("适配器啊,适配器啊,这是一种结构模式,用于将两个不匹配的接口适配起来.Dialer不实现ButtonService了,而是增加两个适配器,适配器实现接口,")]),t._v(" "),s("p",[s("img",{attrs:{src:a(482),alt:"3.3"}})]),t._v(" "),s("p",[t._v("这个场景,Button调用的是buttonPress,而Dialer方法是enterDigit,和dial,不匹配啊,我不修改Dialer代码,让Button能调的动Dialer,就是靠适配器.")]),t._v(" "),s("p",[t._v("每个按钮,依赖一个具体的适配器,当自己按下的时候,将值发给适配器,适配器在调用Dialer.")]),t._v(" "),s("h3",{attrs:{id:"_11-5观察者模式实现开闭原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-5观察者模式实现开闭原则"}},[t._v("#")]),t._v(" 11.5观察者模式实现开闭原则")]),t._v(" "),s("p",[t._v("通过策略,适配器,现在Button,Dialer都符合开闭了,但是,我这控制的一直都是一个设备,我现在要按按钮让喇叭能唱生日快乐歌,让屏幕跑马灯,那么适配器中出现了多个设备,增加设备要修改设备器代码又不符合开闭了,咋弄?")]),t._v(" "),s("p",[s("img",{attrs:{src:a(483),alt:"3.4"}})]),t._v(" "),s("p",[t._v("喇叭的适配器实现Listener,或者想用按钮的都找适配器实现,然后谁需要,谁就添加到Button的列表中,当Button按下时候,就一个个调用,一个个通知,适配器知道,他们的主人要干啥.")]),t._v(" "),s("p",[t._v("这里的Service变成了Listener,类改名了,不要紧,只是为了更好的理解他的用途是一个监听者,接口没变就好.")]),t._v(" "),s("h3",{attrs:{id:"_11-6模板方法实现开闭原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-6模板方法实现开闭原则"}},[t._v("#")]),t._v(" 11.6模板方法实现开闭原则")]),t._v(" "),s("p",[t._v("一切万事大吉,突然又想除了控制别的,按钮本身还想执行些操作,完成对成员变量的修改,不同按钮类型操作和记录状态都不同.好像又要在Button的press方法加入switch了,怎么办.这时候可以引入模板方法.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(484),alt:"11.6"}})]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onPress")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("press")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onPress")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ButtonListener")]),t._v(" listener "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" listeners"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tlisterer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buttonPress")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("btnVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_11-7小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-7小结"}},[t._v("#")]),t._v(" 11.7小结")]),t._v(" "),s("p",[t._v("实现开闭关键是抽象,当一个模块依赖的是一个抽象接口时候,那就可以随时对抽象接口扩展.利用多态,通过新实现完成扩展.开闭原则可以说是软件设计原则的原则,是软件设计核心原则.")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("当我 == 一个实体")])]),t._v(" "),s("li",[s("p",[t._v("当我依赖一个接口,我可以保证我自己没变化时候,我就不用变,而把自己判断逻辑交出去.")]),t._v(" "),s("blockquote",[s("p",[t._v("理论上这一步是必须的,即使需求层面绝对不存在多种策略,也不排除需求变更,这样做可以让自己随时切换.")])])]),t._v(" "),s("li",[s("p",[t._v("当我被依赖了,我可以保证我自己没变化时候,我就不用变,你想调用我,加一层适配器,适配器来调用我.")]),t._v(" "),s("blockquote",[s("p",[t._v("当你提供服务给别人,你也应当提供不同的接口,以让别人更简单触发你.")]),t._v(" "),s("p",[t._v("要注意适配器中的职责不能太多.否则,应该还是将职责放到实体内部,继承实体,实现接口,做一个新的子实体,举例就是,调用者Button,与其他依赖Dialer的,各取所需.")])])]),t._v(" "),s("li",[s("p",[t._v("当我需要同时调用多个实体干活的时候,谁需要被调用,谁注册给我,我到时候告诉你.")]),t._v(" "),s("blockquote",[s("p",[t._v("当你作为上游,存在多调用情况时候,且程序还在继续扩大规模,观察者模式是你必须考虑的.")])])]),t._v(" "),s("li",[s("p",[t._v("当我业务比较多,不光我要调用你们,我自己个还得干点事,我弄一套流程,我一边调用你们,在另一边,我自己具体孩子单独实现去.")]),t._v(" "),s("blockquote",[s("p",[t._v("模版方法几乎是,稍微丰富点的实体必须具备的.我们代码中已经到处存在了,而且模版Spring已经玩麻了.")])])])]),t._v(" "),s("h2",{attrs:{id:"十二-软件设计的依赖倒置原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#十二-软件设计的依赖倒置原则"}},[t._v("#")]),t._v(" 十二.软件设计的依赖倒置原则")]),t._v(" "),s("blockquote",[s("p",[t._v("不依赖代码却可以复用他的功能.")])]),t._v(" "),s("p",[t._v("现在我们都是框架开发,作为java开发者,Spring太熟悉了吧.你没有调用过Spring的代码,却能使用他的特性,开发高内聚低耦合的代码,或者说不需要调用Tomcat的代码,就可以监听Http端口,处理Http请求.神奇不?")]),t._v(" "),s("p",[t._v("不卖关子了,先说答案,大家以前访问DB时候,是怎么访问库的,都是依赖"),s("code",[t._v("JDBC")]),t._v("吧,在"),s("code",[t._v("java.sql")]),t._v("中的,各种数据库驱动也都实现了"),s("code",[t._v("JDBC")]),t._v(",当程序换库时候,无需修改,因为我依赖的是JDBC抽象,而数据库驱动作为底层,也是依赖JDBC.")]),t._v(" "),s("p",[t._v("同样的,java开发的web应用,无需依赖Tomcat,只需依赖"),s("code",[t._v("J2EE")]),t._v("规范,实现规范的servlet接口,然后打包,通过容器启动就可以处理Http请求了,这个WEB容器可以是Tomcat也可以是任何实现J2EE的容器,高层不依赖底层,都依赖J2EE规范.")]),t._v(" "),s("h3",{attrs:{id:"_12-1依赖倒置原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-1依赖倒置原则"}},[t._v("#")]),t._v(" 12.1依赖倒置原则")]),t._v(" "),s("blockquote",[s("p",[t._v("高层模块不应该依赖低层模块,二者都应该依赖抽象")]),t._v(" "),s("p",[t._v("抽象不应该依赖具体实现,具体实现应该依赖抽象")])]),t._v(" "),s("p",[t._v("在我们历史思维中,还是controller依赖Service,Service依赖dao这种传统的依赖方式.那么这种方式缺点是什么.")]),t._v(" "),s("ol",[s("li",[t._v("维护困难,一般说高层是业务与策略逻辑,是软件核心所在,而底层是技术细节,这样说技术细节改变可能会影响高层改变,这是不合理的.")]),t._v(" "),s("li",[t._v("复用困难,通常高层复用价值才更高,如果高层依赖底层,那么将变成连带依赖,复用困难.")])]),t._v(" "),s("h3",{attrs:{id:"_12-2依赖倒置的关键是接口所有权倒置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-2依赖倒置的关键是接口所有权倒置"}},[t._v("#")]),t._v(" 12.2依赖倒置的关键是接口所有权倒置")]),t._v(" "),s("p",[t._v("看下面这个图,TaskService依赖ITaskRepository接口,然后再repository实现它,依赖抽象依赖抽象,其实最最重要的是,依赖的抽象,这个接口的所有权,是application-service")]),t._v(" "),s("p",[s("img",{attrs:{src:a(485),alt:"12.2"}})]),t._v(" "),s("h3",{attrs:{id:"_12-3使用依赖倒置-实现高层模块复用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-3使用依赖倒置-实现高层模块复用"}},[t._v("#")]),t._v(" 12.3使用依赖倒置,实现高层模块复用.")]),t._v(" "),s("p",[t._v("让我们回到11.2那个违反开闭的例子,现在我们可以看到,Dialer变化,Button就可能跟着得变,于是我们优化了到11.3那个策略,在这里需要强调的是,这个接口,所有权是属于Button的,不管你是谁,只要你实现我的Service,我按钮就能控制你,这就是依赖倒置的精髓.")]),t._v(" "),s("p",[t._v("现在再回头看看开头那个问题.其他工程师不需要调用我代码,就能使用我们代码功能特性?如果我们是Button开发者,只要其他工程师实现我们提供的Service,我们就能控制这些设备.设备开发者也不需要调用Button,就能拥有Button的功能,")]),t._v(" "),s("h3",{attrs:{id:"_12-4小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-4小结"}},[t._v("#")]),t._v(" 12.4小结")]),t._v(" "),s("p",[t._v("遵循依赖倒置规则几个编码守则")]),t._v(" "),s("ul",[s("li",[t._v("应用代码多使用抽象接口,避免使用多变的具体实现")]),t._v(" "),s("li",[t._v("不要继承具体类,如果一个类设计之初不是抽象类,那么尽量不去继承他,对具体类的继承是强依赖,维护时候难以改变.")]),t._v(" "),s("li",[t._v("不要重写包含具体实现的函数")])]),t._v(" "),s("p",[t._v("依赖倒置最典型使用场景:框架设计.")]),t._v(" "),s("p",[t._v("毒鸡汤:软件开发有时候像变魔术一样,常常表现出违反常识的特性,让人目眩神秘,这正式软件编程魅力所在,感受这种魅力,并在自己的开发中展现这种魅力,你就迈进了高手的大门.")]),t._v(" "),s("h2",{attrs:{id:"十三-软件设计之里式替换原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#十三-软件设计之里式替换原则"}},[t._v("#")]),t._v(" 十三.软件设计之里式替换原则")]),t._v(" "),s("blockquote",[s("p",[t._v("正方形能继承长方形吗?")])]),t._v(" "),s("p",[t._v("抽象,封装,继承,多态,有人不知道吗?但是想用的好,可能需要花费很多时间.")]),t._v(" "),s("p",[t._v("通俗来讲,抽象的接口,多实现就是多态,在运行期绑定具体类,实体类之间不需要耦合就可以关联,构成完整强大的服务.绝大多数设计模式都是利用多态玩的把戏.")]),t._v(" "),s("p",[t._v("封装,是说将哪些属性,方法,放到哪个类呢?这个问题其实就是对对象的设计,深入研究,里面也有很多学问.")]),t._v(" "),s("p",[s("strong",[t._v("继承似乎比多态,封装简单些,但实践中,继承的误用也很常见.这一章我们聊聊继承那些事.")])]),t._v(" "),s("h3",{attrs:{id:"_13-1里式替换原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-1里式替换原则"}},[t._v("#")]),t._v(" 13.1里式替换原则")]),t._v(" "),s("p",[t._v("如何设计继承关系,怎么不违反开闭?这里有个原则,就是里式替换原则,原则原话太专业,大白话说,所有使用基类的地方,都应该可以用子类替代.  (还没懂?往下看)")]),t._v(" "),s("p",[t._v("语法上来说,任何类都能被继承,但是继承是否合理,从继承本身,你并不能看出来,而是要从使用场景.")]),t._v(" "),s("p",[t._v("举个例子,")]),t._v(" "),s("p",[t._v("🐴有个抽象方法,被骑,他有两个继承,大白🐴,小🐴驹,大白马上场时候,没什么问题.但是20天的小马驹能被骑吗?所以,就针对这一种场景,小马驹能替代(抽象)马吗?不能,违反了里式替换原则.")]),t._v(" "),s("h3",{attrs:{id:"_13-2违反里式替换原则的例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-2违反里式替换原则的例子"}},[t._v("#")]),t._v(" 13.2违反里式替换原则的例子")]),t._v(" "),s("p",[t._v("这个懒得说了.")]),t._v(" "),s("h3",{attrs:{id:"_13-3-正方形可以继承长方形吗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-3-正方形可以继承长方形吗"}},[t._v("#")]),t._v(" 13.3.正方形可以继承长方形吗?")]),t._v(" "),s("p",[t._v("正方形是长方形吗?是啊,正方形是特殊的长方形,他的,宽,高相等.所以可以继承吗?")]),t._v(" "),s("p",[t._v("但是记得前面说的吗?继承是否合理,是否违反里式替换原则,需要具体场景考察.")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWidth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculateArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" width"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("这个类满足我们需要,在多个地方被调用,但是现在,我们需要个正方形.我们看看继承是否合理.")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Square")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置宽就是设置高")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWidth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置高就是设置宽")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("看起来很正常啊,很正常.很正常吗?")]),t._v(" "),s("p",[t._v("如果有个场景.")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rectangle")]),t._v(" rect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWidth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\trect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" rect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculateArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("显然,如果这里正方形替换了长方形,计算面积一定是16,程序不能正常运行,所以不满足里式替换原则,是不合理继承.")]),t._v(" "),s("h3",{attrs:{id:"_13-4子类不能比父类更严格"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-4子类不能比父类更严格"}},[t._v("#")]),t._v(" 13.4子类不能比父类更严格.")]),t._v(" "),s("p",[t._v("类的公有方法,其实是对使用者的契约.使用者按契约使用,并期望按照契约运行,返回合理的值.")]),t._v(" "),s("p",[t._v("按照里式替换原则,子类可以在任何地方替换父类,那么子类不能比父类更严格,否则可能会因为更严格而失败.")]),t._v(" "),s("p",[t._v("上面的例子,正方形继承长方形,正方形长宽要求相等,更加严格,所以导致最终失败.开头🐴的例子也是,小马太小了,更严格,即不能骑,所以失败.")]),t._v(" "),s("p",[t._v("大家调用BaseAPPService,BaseExtendService,里面有些东西是protected的,有人重写过吗?你想留起来自己用,能写成private吗?不能,因为private比protected更严格,但是public呢,可以!")]),t._v(" "),s("p",[t._v("通常来讲,子类不能比父类更严格,这个原则简单,合理,但是实际中,不严格审视自己的设计,很可能违背里式替换原则.")]),t._v(" "),s("p",[t._v("摘抄:在JDK中,Stack继承自Vector.子类比父类更严格,子类只能先进后出,父类是线性表,这两个类jdk1就已经存在,如果能重来,jdk的工程师一定不会这样了.这也说明,不恰当的设计时很容易发生的,设计继承时候,更要严谨审视自己设计.")]),t._v(" "),s("h3",{attrs:{id:"_13-5小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-5小结"}},[t._v("#")]),t._v(" 13.5小结")]),t._v(" "),s("p",[t._v("实践中,如果继承父类,只是为了复用父类的方法的时候,那你里错误继承不远了,一个类如果不是为了继承而设计,最好不要继承,简单说,如果不是抽象,或者接口.不要继承他!")]),t._v(" "),s("p",[t._v("如果你确定,你要用他的方法,最好的方法是组合他,而不是继承.我现在就在想,上次我用BaseExtendsService,我保存时候我要走平台common的rule,结果我继承了他,并重写了落库那个方法,现在想,我好像是不妥.")]),t._v(" "),s("h2",{attrs:{id:"十四-软件设计的单一职责原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#十四-软件设计的单一职责原则"}},[t._v("#")]),t._v(" 十四.软件设计的单一职责原则")]),t._v(" "),s("blockquote",[s("p",[t._v("一个类打开后最后不要太长..具体多长,就是不要太长.")])]),t._v(" "),s("p",[t._v("我跨过了山河大海,跨不过码山码海~")]),t._v(" "),s("h3",{attrs:{id:"_14-1单一职责原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_14-1单一职责原则"}},[t._v("#")]),t._v(" 14.1单一职责原则")]),t._v(" "),s("p",[t._v("好了废话不多说,上干货.")]),t._v(" "),s("p",[t._v("软件两个基本准则,高内聚+低耦合.前面讲的例子以及设计模式都是低耦合的,这次我们说说高内聚.内聚性说的是组成一个模块或者类的内部元素的功能相关性.")]),t._v(" "),s("p",[t._v("设计类,应该把强关联的属性,方法放在一个类里,弱关联的放在类外边,保持高内聚.时刻记得哦.")]),t._v(" "),s("p",[t._v("一个类,应该只有一个变化的原因.")]),t._v(" "),s("p",[t._v("如果一个类承担太多职责,就等于把这些职责耦合在一起,这种耦合很脆弱,当发生变化,类会引起很多不必要的修改.进而导致bug发生.")]),t._v(" "),s("p",[t._v("职责太多,还会导致代码太多,难以保证开闭,如果不得不进行修改了,大堆代码出现在屏幕上,一不小心就会出bug.")]),t._v(" "),s("p",[t._v("所以,一个类,最好不超过一屏幕,1.可以更容易复用,扩展,2.更简单的阅读,维护方便.")]),t._v(" "),s("h3",{attrs:{id:"_14-2一个违反单一职责的例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_14-2一个违反单一职责的例子"}},[t._v("#")]),t._v(" 14.2一个违反单一职责的例子")]),t._v(" "),s("p",[t._v("再重复下,判断类职责是否单一,就看这个类修改时候是不是只有一个引起它变化的原因.")]),t._v(" "),s("p",[t._v("看这个类图")]),t._v(" "),s("p",[s("img",{attrs:{src:a(486),alt:"14.2"}})]),t._v(" "),s("p",[t._v("长方形有两个方法,画图draw(),算面积area(),很合理对吧.")]),t._v(" "),s("p",[t._v("现在,两个应用依赖这个类,几何计算应用和图形界面应用.")]),t._v(" "),s("p",[t._v("画图要算面积,算面积不需要画图.而且画图非常麻烦,还需要依赖GUI组件包.")]),t._v(" "),s("p",[t._v("这就尴尬了,我一个几何计算,依赖Rectangle,还需要GUI?这个包几十MB甚至上百啊,本来我就想做个科学计算器,却不得不打包不相关的GUI.")]),t._v(" "),s("p",[t._v("Rectangle就违反了单一职责,承担了两个职责,这种两个方法会互相影响,看看下面这个.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(487),alt:"14.21"}})]),t._v(" "),s("p",[t._v("面积计算拆到单独的类GeometricRectangle,纯粹负责计算面积,Rectangle只负责画图,依赖画图的,以及一堆GUI组件.")]),t._v(" "),s("h3",{attrs:{id:"_14-3小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_14-3小结"}},[t._v("#")]),t._v(" 14.3小结")]),t._v(" "),s("p",[t._v("类变多了,不要紧,单个类代码少了,代码整体来说变得更简单了.复杂度降低.")]),t._v(" "),s("h2",{attrs:{id:"十五-软件设计的接口隔离原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#十五-软件设计的接口隔离原则"}},[t._v("#")]),t._v(" 十五.软件设计的接口隔离原则")]),t._v(" "),s("blockquote",[s("p",[t._v("如何对类的调用者隐藏类的公有方法.")])]),t._v(" "),s("p",[t._v("假设有个缓存服务,Cache,功能高内聚,但是功能分为两组.")]),t._v(" "),s("ol",[s("li",[t._v("对普通开发者有能增删查的方法,")]),t._v(" "),s("li",[t._v("重置掉所有缓存的方法提供给清缓存流水线服务调用.")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(488),alt:"15.1"}})]),t._v(" "),s("p",[t._v("对清缓存流水线开发者来说,多几个方法,碍眼但是还能接受,但如果这个fulshall()方法被普通开发者错误调用,那可就麻烦了.但是都是public的,怎么控制呢?")]),t._v(" "),s("h3",{attrs:{id:"_15-1接口隔离原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-1接口隔离原则"}},[t._v("#")]),t._v(" 15.1接口隔离原则")]),t._v(" "),s("blockquote",[s("p",[t._v("不应该强迫用户依赖他们不需要的方法.")])]),t._v(" "),s("p",[t._v("接口隔离原则,解决你的问题.")]),t._v(" "),s("p",[t._v("当一个类的方法,对所有人暴露且无论他是否需要,理解的时候,这时候就要反思了.")]),t._v(" "),s("p",[t._v("有人会想到上面的单一职责,我弄两个类把他们分开不就行了吗?但是这内聚没问题啊,我都操作我的缓存,放一个类无可厚非.下面让你看下接口隔离原则是怎么做的.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(489),alt:"15.1"}})]),t._v(" "),s("p",[t._v("Cache实现2个接口,当我对流水线服务暴露CacheFlushService,而对开发者调用CacheService,通过接口,然不同的人看到不同接口,是不是很神奇!仔细想想,原理是不是很简单.")]),t._v(" "),s("h3",{attrs:{id:"_15-2一个使用接口隔离原则优化的例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-2一个使用接口隔离原则优化的例子"}},[t._v("#")]),t._v(" 15.2一个使用接口隔离原则优化的例子")]),t._v(" "),s("p",[t._v("假设已经有个门,他可以开,关,并判断是否开着.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("class Door{\n\tvoid lock;\n\tvoid unlock;\n\tboolean isOpen;\n}\n")])])]),s("p",[t._v("现在需要一个定时门,定时一定时间自动关闭,")]),t._v(" "),s("p",[t._v("已经有一个类Timer,和一个接口TimerClient")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("class Timer{\n\tvoid register(int timeout,TimerClient client)\n}\ninterface TimerClient{\n\tvoid timeout();\n}\n")])])]),s("p",[t._v("现在这里有个简单直观的方法.")]),t._v(" "),s("p",[t._v("修改Door,实现TimerClient,直接将Door注册给Timer,这样就可以实现定时了,")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("class Door implements TimerClient{\n\tvoid lock;\n\tvoid unlock;\n\tboolean isOpen;\n\tvoid timeout(){\n\t\tlock();\n\t}\n}\n")])])]),s("p",[t._v("这个方法简单,有效,问题就是在于Door多了个timeout方法,普通人看到可能觉得莫名其妙,如果复用他,所有的程序可能都依赖一个他们不用的方法timeout.这时候可以看到接口隔离发挥了作用.")]),t._v(" "),s("p",[t._v("一种方法是通过委托,也就是增加适配器,适配器实现TimeClient,聚合一个Door,并将自己注册给Timer,适配器来做超时后让门关闭的事.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(490),alt:"15.2"}})]),t._v(" "),s("p",[t._v("这样就是适配器任务会重些,尤其是,业务逻辑较多,比如超时还有较多逻辑,就会超出适配器职责范围,或者可能还需要Door内部状态,会有强迫Door作出改变的可能.")]),t._v(" "),s("p",[t._v("这个类图就是11.4那个适配器模式实现开闭,Timer就是Button,TimerClient就是被调用的接口,一个适配器实现了他,适配器再去调用实体.")]),t._v(" "),s("p",[t._v("还有种方法就是,多重继承.一面实现TimerClient,一面继承Door,造出来新的多功能定时门,将这个门注册给Timer,这样复用后依赖Door的程序看不到timeout方法,而Timer也不会看到Door的方法,完全隔离,程序更简洁.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(491),alt:"15.2_1.jpg"}})]),t._v(" "),s("h3",{attrs:{id:"_15-3小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-3小结"}},[t._v("#")]),t._v(" 15.3小结")]),t._v(" "),s("p",[t._v("当一个类比较大,如果该类的不用调用者被迫依赖了类的所有方法,就可能产出不必要的耦合,或引起误用,导致对象结构被破坏,产生Bug.")]),t._v(" "),s("p",[t._v("使用接口隔离原则,核心思想就是定义多个接口,不用调用者依赖不同的接口,只看到自己需要的方法.")]),t._v(" "),s("h2",{attrs:{id:"项目云要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目云要求"}},[t._v("#")]),t._v(" 项目云要求:")]),t._v(" "),s("p",[t._v("讨论这么多方法,原则,如果你觉得有用,正好可以解决痛点,想尝试下改变.那么我提出些要求,帮助大家改进")]),t._v(" "),s("p",[t._v("已经沉淀下来的,谨慎修改,循环迭代.")]),t._v(" "),s("ol",[s("li",[t._v("保证功能开发进度,不要因为技术而技术,还是以产品迭代为首要任务!")]),t._v(" "),s("li",[t._v("所有功能,先做设计,(不是很负责的设计,就简单的画画类图,确保没有做歪且可扩展),你做设计之前,要问清需求,理清需求,必须明白,我这次做的,是为什么角色做的,解决什么问题,我这个功能跟谁的什么功能是有关联的,并进行简单评审.")]),t._v(" "),s("li",[t._v("当你的服务需要拆分,拆分过程中,如果发现各层难以分割,可以作出结构修改.")]),t._v(" "),s("li",[t._v("当需求变了,你又要改的时候,整个类都将变化,变得不稳定,请仔细审视,这个方法是不是应该继续在这里,如果不是,请将它移走.")]),t._v(" "),s("li",[t._v("谨慎继承")]),t._v(" "),s("li",[t._v("接口就像裁缝的剪子厨师的刀.自己的模块接口设计自己写(可以别人教但是接口一定自己写),不允许在别人的模块里的接口里随意添加方法,你只能在别人的接口实现里写(在别人给你留好的地方写).所以如果你需要一个功能,请说,我需要一个***接口,请提供给我.而你也是依赖接口.")]),t._v(" "),s("li",[t._v("如果你提供的是框架,请设计好自己的接口,并且说,请实现我的接口,实现什么什么..我能给你提供什么,你需要给我返回什么..")]),t._v(" "),s("li",[t._v("提供的接口,"),s("strong",[t._v("是接口上不是实现上")]),t._v("!!一定要有详细的注释,别人调用你只会调用你的接口不会调你的实现,你的实现注解,自己能看懂就好,当你调用服务,如果你觉得别人提供给你的接口你用的不爽,质疑他,并展开讨论,失败的一方作出修改.")]),t._v(" "),s("li",[t._v("当你作为下游需要别人调用你的时候,不允许直接去别人方法里调用自己,请提供接口,告诉他,什么时候,调用我.让调用者好好思考决定,什么时候调用,在方法的哪一行调用,并做好调用的处理.如果下游不稳定,需要负责,因为你会让上游不稳定.")]),t._v(" "),s("li",[t._v("尽量少用@Autowired,稍有不慎,它让你不再职责专一.也让你不容易脱离容器测试.也让你不容易随心所欲切换具体策略.推荐构造方法注入,在一开始,就知道这个类大概要做哪些功能,该注入的注入,谨慎扩展.")])]),t._v(" "),s("p",[t._v("想跟大家说下,计算机发展进程,就像猿人抛起来的一块石头,落地时候,这个石头已经变成了火箭.时代变化这么快,如果你想让需求永远一成不变,那你一定是非蠢既坏,等待被时代淘汰.我们真正应该做的,就是用好的设计,从容面对一切变化,你核心业务变了,我改领域方法(这个很难变),你一个操作方式变了,没事我facade重新给你组装下顺序.来调这个.用户好像喜欢用那种特殊方式?没事给你留一种策略满足你.什么你想多数据库?没事你想用哪个我就给你适配下soeasy.")])])}),[],!1,null,null,null);s.default=e.exports}}]);