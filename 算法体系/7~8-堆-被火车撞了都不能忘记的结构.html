<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>堆-被火车撞了都不能忘记的结构 | 冯手力-java学习之路</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.49d708b7.css" as="style"><link rel="preload" href="/assets/js/app.4bcd492b.js" as="script"><link rel="preload" href="/assets/js/2.8fdba881.js" as="script"><link rel="preload" href="/assets/js/1.54dbed7e.js" as="script"><link rel="preload" href="/assets/js/46.90905eb6.js" as="script"><link rel="prefetch" href="/assets/js/10.fbd1c150.js"><link rel="prefetch" href="/assets/js/100.23f70170.js"><link rel="prefetch" href="/assets/js/101.7712066d.js"><link rel="prefetch" href="/assets/js/102.495dfb59.js"><link rel="prefetch" href="/assets/js/103.33ada265.js"><link rel="prefetch" href="/assets/js/104.a084c126.js"><link rel="prefetch" href="/assets/js/105.359fff21.js"><link rel="prefetch" href="/assets/js/106.e5f0ea78.js"><link rel="prefetch" href="/assets/js/107.2bb91f9f.js"><link rel="prefetch" href="/assets/js/108.74b36701.js"><link rel="prefetch" href="/assets/js/109.d55485a6.js"><link rel="prefetch" href="/assets/js/11.42ed8b2e.js"><link rel="prefetch" href="/assets/js/110.519badaa.js"><link rel="prefetch" href="/assets/js/111.9e87b884.js"><link rel="prefetch" href="/assets/js/112.63f549e3.js"><link rel="prefetch" href="/assets/js/113.33579d76.js"><link rel="prefetch" href="/assets/js/114.fb291443.js"><link rel="prefetch" href="/assets/js/115.8f269171.js"><link rel="prefetch" href="/assets/js/116.b0a2d99b.js"><link rel="prefetch" href="/assets/js/117.df326183.js"><link rel="prefetch" href="/assets/js/118.246d9ce4.js"><link rel="prefetch" href="/assets/js/119.95353bee.js"><link rel="prefetch" href="/assets/js/12.bf3ac8be.js"><link rel="prefetch" href="/assets/js/13.443a1262.js"><link rel="prefetch" href="/assets/js/14.0939f869.js"><link rel="prefetch" href="/assets/js/15.fcada69f.js"><link rel="prefetch" href="/assets/js/16.5c06248f.js"><link rel="prefetch" href="/assets/js/17.2f057810.js"><link rel="prefetch" href="/assets/js/18.feb70542.js"><link rel="prefetch" href="/assets/js/19.8604b0d1.js"><link rel="prefetch" href="/assets/js/20.d8fe0666.js"><link rel="prefetch" href="/assets/js/21.532dc883.js"><link rel="prefetch" href="/assets/js/22.36b39384.js"><link rel="prefetch" href="/assets/js/23.b2ac4539.js"><link rel="prefetch" href="/assets/js/24.fc928307.js"><link rel="prefetch" href="/assets/js/25.a846d76f.js"><link rel="prefetch" href="/assets/js/26.139b770d.js"><link rel="prefetch" href="/assets/js/27.716f598f.js"><link rel="prefetch" href="/assets/js/28.ed205924.js"><link rel="prefetch" href="/assets/js/29.59dc65ee.js"><link rel="prefetch" href="/assets/js/3.56cc2b82.js"><link rel="prefetch" href="/assets/js/30.daccf7fa.js"><link rel="prefetch" href="/assets/js/31.63bc47c5.js"><link rel="prefetch" href="/assets/js/32.05ec6cfb.js"><link rel="prefetch" href="/assets/js/33.b4f5a7a7.js"><link rel="prefetch" href="/assets/js/34.b4126ccf.js"><link rel="prefetch" href="/assets/js/35.7c9529cc.js"><link rel="prefetch" href="/assets/js/36.e48bc3fc.js"><link rel="prefetch" href="/assets/js/37.092c1958.js"><link rel="prefetch" href="/assets/js/38.96f383f0.js"><link rel="prefetch" href="/assets/js/39.11d3d0d7.js"><link rel="prefetch" href="/assets/js/4.7e1a4e7a.js"><link rel="prefetch" href="/assets/js/40.920373d3.js"><link rel="prefetch" href="/assets/js/41.35d39d0c.js"><link rel="prefetch" href="/assets/js/42.ac8a6553.js"><link rel="prefetch" href="/assets/js/43.b32da1b8.js"><link rel="prefetch" href="/assets/js/44.2a300ea6.js"><link rel="prefetch" href="/assets/js/45.39045a24.js"><link rel="prefetch" href="/assets/js/47.b989c417.js"><link rel="prefetch" href="/assets/js/48.a0e370fc.js"><link rel="prefetch" href="/assets/js/49.ac382d21.js"><link rel="prefetch" href="/assets/js/5.e91f520c.js"><link rel="prefetch" href="/assets/js/50.2a5c791b.js"><link rel="prefetch" href="/assets/js/51.2a54d46c.js"><link rel="prefetch" href="/assets/js/52.dd7f626a.js"><link rel="prefetch" href="/assets/js/53.3f3f147d.js"><link rel="prefetch" href="/assets/js/54.01a95868.js"><link rel="prefetch" href="/assets/js/55.c7b69e4e.js"><link rel="prefetch" href="/assets/js/56.60484440.js"><link rel="prefetch" href="/assets/js/57.979e19f1.js"><link rel="prefetch" href="/assets/js/58.b14ca47c.js"><link rel="prefetch" href="/assets/js/59.52985e41.js"><link rel="prefetch" href="/assets/js/6.a0b367e0.js"><link rel="prefetch" href="/assets/js/60.81eeec23.js"><link rel="prefetch" href="/assets/js/61.97f3e5a3.js"><link rel="prefetch" href="/assets/js/62.c2943e0a.js"><link rel="prefetch" href="/assets/js/63.c99d565c.js"><link rel="prefetch" href="/assets/js/64.9f4e2f25.js"><link rel="prefetch" href="/assets/js/65.1673fe32.js"><link rel="prefetch" href="/assets/js/66.9eccd52b.js"><link rel="prefetch" href="/assets/js/67.969dec50.js"><link rel="prefetch" href="/assets/js/68.f490fa6b.js"><link rel="prefetch" href="/assets/js/69.3dc60969.js"><link rel="prefetch" href="/assets/js/7.9f4a8525.js"><link rel="prefetch" href="/assets/js/70.c44487ef.js"><link rel="prefetch" href="/assets/js/71.a9a35313.js"><link rel="prefetch" href="/assets/js/72.cf93ad32.js"><link rel="prefetch" href="/assets/js/73.99913944.js"><link rel="prefetch" href="/assets/js/74.510facd9.js"><link rel="prefetch" href="/assets/js/75.96165437.js"><link rel="prefetch" href="/assets/js/76.69966861.js"><link rel="prefetch" href="/assets/js/77.3eaf6412.js"><link rel="prefetch" href="/assets/js/78.63542af6.js"><link rel="prefetch" href="/assets/js/79.bf7537bb.js"><link rel="prefetch" href="/assets/js/80.1af6f338.js"><link rel="prefetch" href="/assets/js/81.89cf1d0a.js"><link rel="prefetch" href="/assets/js/82.32592bf0.js"><link rel="prefetch" href="/assets/js/83.e28cf472.js"><link rel="prefetch" href="/assets/js/84.64466a80.js"><link rel="prefetch" href="/assets/js/85.1ffcf5e4.js"><link rel="prefetch" href="/assets/js/86.f4aea5b8.js"><link rel="prefetch" href="/assets/js/87.c376c808.js"><link rel="prefetch" href="/assets/js/88.c291cce1.js"><link rel="prefetch" href="/assets/js/89.4ca7217c.js"><link rel="prefetch" href="/assets/js/90.718fa94e.js"><link rel="prefetch" href="/assets/js/91.3e6603a7.js"><link rel="prefetch" href="/assets/js/92.d1177551.js"><link rel="prefetch" href="/assets/js/93.f4e434b2.js"><link rel="prefetch" href="/assets/js/94.b955f917.js"><link rel="prefetch" href="/assets/js/95.c14e2a87.js"><link rel="prefetch" href="/assets/js/96.b56a58ce.js"><link rel="prefetch" href="/assets/js/97.b1f2a6c3.js"><link rel="prefetch" href="/assets/js/98.d90ee1a2.js"><link rel="prefetch" href="/assets/js/99.b55c0bbb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d437f548.js">
    <link rel="stylesheet" href="/assets/css/0.styles.49d708b7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">冯手力-java学习之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/操作/" class="nav-link">
  操作
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="经验" class="dropdown-title"><span class="title">经验</span> <span class="arrow down"></span></button> <button type="button" aria-label="经验" class="mobile-dropdown-title"><span class="title">经验</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/工作经验/" class="nav-link">
  工作经验
</a></li><li class="dropdown-item"><!----> <a href="/项目经验/" class="nav-link">
  项目经验
</a></li></ul></div></div><div class="nav-item"><a href="/java/" class="nav-link">
  java
</a></div><div class="nav-item"><a href="/架构之路/" class="nav-link">
  架构之路
</a></div><div class="nav-item"><a href="/领域驱动设计/" class="nav-link">
  领域驱动设计
</a></div><div class="nav-item"><a href="/源码解析/" class="nav-link">
  源码解析
</a></div><div class="nav-item"><a href="/程序员英语/" class="nav-link">
  程序员英语
</a></div><div class="nav-item"><a href="/面试突击班/" class="nav-link">
  面试突击班
</a></div><div class="nav-item"><a href="/算法体系/" class="nav-link">
  算法体系
</a></div><div class="nav-item"><a href="/用友/" class="nav-link">
  用友
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/操作/" class="nav-link">
  操作
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="经验" class="dropdown-title"><span class="title">经验</span> <span class="arrow down"></span></button> <button type="button" aria-label="经验" class="mobile-dropdown-title"><span class="title">经验</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/工作经验/" class="nav-link">
  工作经验
</a></li><li class="dropdown-item"><!----> <a href="/项目经验/" class="nav-link">
  项目经验
</a></li></ul></div></div><div class="nav-item"><a href="/java/" class="nav-link">
  java
</a></div><div class="nav-item"><a href="/架构之路/" class="nav-link">
  架构之路
</a></div><div class="nav-item"><a href="/领域驱动设计/" class="nav-link">
  领域驱动设计
</a></div><div class="nav-item"><a href="/源码解析/" class="nav-link">
  源码解析
</a></div><div class="nav-item"><a href="/程序员英语/" class="nav-link">
  程序员英语
</a></div><div class="nav-item"><a href="/面试突击班/" class="nav-link">
  面试突击班
</a></div><div class="nav-item"><a href="/算法体系/" class="nav-link">
  算法体系
</a></div><div class="nav-item"><a href="/用友/" class="nav-link">
  用友
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/%E7%AE%97%E6%B3%95%E4%BD%93%E7%B3%BB/" aria-current="page" class="sidebar-link">算法体系学习</a></li><li><a href="/算法体系/算法基础.html" class="sidebar-link">算法基础学习</a></li><li><a href="/算法体系/算法新手班.html" class="sidebar-link">算法新手班</a></li><li><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html" class="active sidebar-link">堆-被火车撞了都不能忘记的结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#堆结构" class="sidebar-link">堆结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#完全二叉树" class="sidebar-link">完全二叉树</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#位置关系" class="sidebar-link">位置关系</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#数组表示一个堆结构" class="sidebar-link">数组表示一个堆结构</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#heapinsert" class="sidebar-link">heapInsert</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#heapify" class="sidebar-link">heapify</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#调整堆" class="sidebar-link">调整堆</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#堆排序额外空间复杂度-o-1" class="sidebar-link">堆排序额外空间复杂度 O(1)</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#建堆过程比较" class="sidebar-link">建堆过程比较</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#练习题" class="sidebar-link">练习题:</a></li></ul></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#加强堆" class="sidebar-link">加强堆</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#代码核心思想" class="sidebar-link">代码核心思想</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#加强堆特殊功能" class="sidebar-link">加强堆特殊功能</a></li><li class="sidebar-sub-header"><a href="/算法体系/7~8-堆-被火车撞了都不能忘记的结构.html#手动改写堆题目练习" class="sidebar-link">手动改写堆题目练习</a></li></ul></li></ul></li><li><a href="/算法体系/9-前缀树.html" class="sidebar-link">前缀树（prefix tree/trie）</a></li><li><a href="/算法体系/10-排序总结,链表相关题目.html" class="sidebar-link">10-排序总结,链表相关题目</a></li><li><a href="/算法体系/11~13-二叉树.html" class="sidebar-link">二叉树</a></li><li><a href="/算法体系/15~16-并查集-查连通区域神器.html" class="sidebar-link">并查集-查连通区域神器</a></li><li><a href="/算法体系/17-图.html" class="sidebar-link">图</a></li><li><a href="/算法体系/18~24-暴力递归到动态规划.html" class="sidebar-link">暴力递归到动态规划</a></li><li><a href="/算法体系/25-滑动窗口内最大值或最小值问题.html" class="sidebar-link">滑动窗口内最大值或最小值问题</a></li><li><a href="/算法体系/26-单调栈.html" class="sidebar-link">单调栈</a></li><li><a href="/算法体系/28-KMP算法.html" class="sidebar-link">KMP算法</a></li><li><a href="/算法体系/29-Manacher算法.html" class="sidebar-link">Manacher算法</a></li><li><a href="/算法体系/30-蓄水池算法.html" class="sidebar-link">蓄水池算法</a></li><li><a href="/算法体系/30-bfprt算法-topk.html" class="sidebar-link">bfprt算法</a></li><li><a href="/算法体系/31-Morris遍历.html" class="sidebar-link">Morris遍历</a></li><li><a href="/算法体系/32-线段树.html" class="sidebar-link">线段树</a></li><li><a href="/算法体系/大厂-21-树链刨分.html" class="sidebar-link">树链刨分</a></li><li><a href="/算法体系/33-IndexTree,AC自动机.html" class="sidebar-link">IndexTree,AC自动机</a></li><li><a href="/算法体系/34-与哈希函数有关的数据结构.html" class="sidebar-link">与哈希函数有关的数据结构</a></li><li><a href="/算法体系/35-资源限制类题目解题思路.html" class="sidebar-link">资源限制类题目解题思路</a></li><li><a href="/算法体系/41-数组三连问题.html" class="sidebar-link">数组三连问题.</a></li><li><a href="/算法体系/大厂刷题.html" class="sidebar-link">大厂刷题</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="堆-被火车撞了都不能忘记的结构"><a href="#堆-被火车撞了都不能忘记的结构" class="header-anchor">#</a> 堆-被火车撞了都不能忘记的结构</h1> <h2 id="堆结构"><a href="#堆结构" class="header-anchor">#</a> 堆结构</h2> <ol><li>堆结构就是用数组实现的完全二叉树结构</li> <li>完全二叉树中如果每棵子树的最大值都在顶部就是大根堆</li> <li>完全二叉树中如果每棵子树的最小值都在顶部就是小根堆</li> <li>堆结构的heapInsert和heapify操作</li> <li>堆结构的增大和减少</li> <li>优先级队列,就是堆结构</li></ol> <h3 id="完全二叉树"><a href="#完全二叉树" class="header-anchor">#</a> 完全二叉树</h3> <ol><li>空树</li> <li>单个节点</li> <li>满树</li> <li>不是满树,但是是从左向右变满的过程</li></ol> <h3 id="位置关系"><a href="#位置关系" class="header-anchor">#</a> 位置关系</h3> <ul><li>任何一个节点的左孩子位置:2*i+1</li> <li>任何一个节点的右孩子位置:2*i+2</li> <li>任何一个节点的父节点位置:(i-1)/2取整</li></ul> <h3 id="数组表示一个堆结构"><a href="#数组表示一个堆结构" class="header-anchor">#</a> 数组表示一个堆结构</h3> <p>数组中一个个数来,一个个加到堆中,堆调整后,会影响数组相对的位置,且堆的大小,受heapsize影响.</p> <p><img src="/assets/img/image-20240515235914211.3d2d38d3.png" alt="image-20240515235914211"></p> <h3 id="heapinsert"><a href="#heapinsert" class="header-anchor">#</a> heapInsert</h3> <p>从index位置开始,依次向上移动,直到0位置,或者干不过自己的父级,结束.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapInsert</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//当前是index,父级是[index-1]/2</span>
  <span class="token comment">//这个判断表示2个条件,当为0时候,0不可能比0位置大.(取整)</span>
   <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span><span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      index <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="heapify"><a href="#heapify" class="header-anchor">#</a> heapify</h3> <p>从index位置开始,依次向下移动,直到没孩子,或者比&quot;较大的&quot;孩子小,结束.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> heapSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">int</span> left <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token comment">//如果有左孩子,如果没有左,不可能有右,</span>
   <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> heapSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">//看看有没有右孩子,并且选出左右更大的那个.</span>
      <span class="token keyword">int</span> largest <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> heapSize <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">?</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> left<span class="token punctuation">;</span>
     <span class="token comment">//看看我跟较大孩子谁大,如果我最大,那就完事了,否则跟较大孩子换.</span>
      largest <span class="token operator">=</span> arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">?</span> largest <span class="token operator">:</span> index<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>largest <span class="token operator">==</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> largest<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
      index <span class="token operator">=</span> largest<span class="token punctuation">;</span>
      left <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="调整堆"><a href="#调整堆" class="header-anchor">#</a> 调整堆</h3> <p>当数组中新加入一个孩子时,我不知道更大还是更小,但是我可以依次调用heapInsert和heapify,两个只会走一个.</p> <h3 id="堆排序额外空间复杂度-o-1"><a href="#堆排序额外空间复杂度-o-1" class="header-anchor">#</a> 堆排序额外空间复杂度 O(1)</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 堆排序额外空间复杂度O(1)</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// O(N*logN)</span>
<span class="token comment">//    for (int i = 0; i &lt; arr.length; i++) { // O(N)</span>
<span class="token comment">//       heapInsert(arr, i); // O(logN)</span>
<span class="token comment">//    }</span>
      <span class="token comment">// O(N)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">int</span> heapSize <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
      <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">--</span>heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// O(N*logN)</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>heapSize <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// O(N)</span>
         <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// O(logN)</span>
         <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">--</span>heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// O(1)</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</code></pre></div><h3 id="建堆过程比较"><a href="#建堆过程比较" class="header-anchor">#</a> 建堆过程比较</h3> <p>当一次性给出所有元素的时候,对比heapInsert和heapify建堆的效率</p> <h4 id="heapinsert-n-logn"><a href="#heapinsert-n-logn" class="header-anchor">#</a> heapInsert:N*logN</h4> <p>数量 ✖️ 树的高度</p> <h4 id="heapify-n"><a href="#heapify-n" class="header-anchor">#</a> heapify:N</h4> <p>调整次数:</p> <p>N/2 1次(每个节点只看自己)</p> <p>N/4 2次</p> <p>N/8 3次</p> <p>.........</p> <p>错位相减,总体一定收敛于N</p> <p><img src="/assets/img/image-20240519221944165.60c73dba.png" alt="image-20240519221944165"></p> <h3 id="练习题"><a href="#练习题" class="header-anchor">#</a> 练习题:</h3> <h4 id="_1-局部有序的数组排序问题"><a href="#_1-局部有序的数组排序问题" class="header-anchor">#</a> 1.局部有序的数组排序问题</h4> <blockquote><p>已知一个几乎有序的数组,几乎有序是指,如果把数组排好序的话,每个元素的移动距离不超过k,并且k相对整个数组长度来说,比较小.请排序.</p></blockquote> <p>局部排序思想:</p> <p>整一个K个heapsize大小的小根堆,将前k个值放进去(移动最大距离不超过k),然后弹出第一个,他就是最小的,然后把下一个值放进去,然后弹出最小的,然后继续循环这个操作,直到所有数据弹出.</p> <p>这种做法的复杂度就是:N*logK,k是堆的大小,每个数进来,做一次调整的代价是logK</p> <p>如果是普通的数组:整个数组全部排序,<code>N*logN</code>,这个可以看下排序那里的总结,如果是普通的数组,没有任何前置调整的,最好只能做到<code>N*logN</code></p> <h4 id="_2-最大线段重合问题"><a href="#_2-最大线段重合问题" class="header-anchor">#</a> 2.最大线段重合问题</h4> <blockquote><p>给定很多线段,每个线段都有起止两个数,[start,end].表示开始和结束位置,左右都是闭区间.</p> <p>规定.1)线段开始结束,一定是整数.2)线段重合区域长度必须&gt;=1.返回线段最多重合区域中,包含了几条线段.</p></blockquote> <p>思想:重合就是,先按起点排序,下一个线段来了,他结束点在上一个没结束的时候就先结束了.就有重合区域.</p> <p>解法:将所有线段按照起点排序,顺序将线段结尾放到一个小根堆里,放之前,把小于等于当前开始值的弹出.</p> <p>他的含义是:一个线段的起点,堆里比他小的,代表结束在他之前,无交集,而比他大的,一定穿过了当前线段,此时,堆大小,就是重合线段数.</p> <p><img src="/assets/img/image-20240519224714709.7bf5ab95.png" alt="image-20240519224714709"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">maxCover2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">Line</span><span class="token punctuation">[</span><span class="token punctuation">]</span> lines <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Line</span><span class="token punctuation">[</span>m<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Line</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
  <span class="token comment">//按开始位置排序</span>
   <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>lines<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">StartComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// 小根堆，每一条线段的结尾数值，使用默认的</span>
   <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lines<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// lines[i] -&gt; cur 在黑盒中，把&lt;=cur.start 东西都弹出</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>heap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> heap<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>start<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         heap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      heap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>
      max <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> heap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> max<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="加强堆"><a href="#加强堆" class="header-anchor">#</a> 加强堆</h2> <h3 id="代码核心思想"><a href="#代码核心思想" class="header-anchor">#</a> 代码核心思想</h3> <ol><li>建立反向索引表 --用来快速找到内部哪个元素变了,快速让他heapInsert或者heapify</li> <li>建立比较器</li> <li>核心在于各种结构相互配合,非常容易出错.</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 主要用途:手写加强堆
 * java主要还是偏应用,
 * 1.假如现在你手里有一个堆，里面存着一些元素，你有其中一个内部属性发生变化,你怎么调整,还要高效,注意,普通堆,你找到这个元素,已经是N的复杂度了,
 * 2.此时你的用户又想删除堆中的某一个元素，你要怎么高效删除指定元素
 * 加强堆来了,加强堆,内部增加一个反向索引表,
 * 以前我们有个数组,只知道下标存的是谁,而不知道某个元素下标是谁,只能遍历,
 * [a,b,c,d...]
 *  0,1,2,3...
 * 于是增加反向索引表,HashMap&lt;T,Integer&gt;,这个就存了哪个元素在哪个下标位置.注意这有个问题,HashMap会将所有基本类型,基本包装类型,都转为基本类型,这样就无法存重复数据了,可以给T包一层,HashMap&lt;Inner&lt;T&gt;,Integer&gt;
 * 这样,删除方法实现逻辑,直接把最后一个元素跟他换,然后删除最后一个元素,换完了的元素heapInsert或者heapify,这两个只会中一个.高效完成.
 * 单个变了,就在他这个位置heapInsert或者heapify,这两个只会中一个.同样高效完成.
 * @author FengXinYang
 * @date 2022/10/12
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeapGreater</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> heap<span class="token punctuation">;</span><span class="token comment">//这就是以前的熟悉的数组</span>
    <span class="token comment">//private ArrayList&lt;Inner&lt;T&gt;&gt; heap;//这就是以前的熟悉的数组</span>
    <span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> indexMap<span class="token punctuation">;</span> <span class="token comment">//反向索引表</span>
    <span class="token comment">//private HashMap&lt;Inner&lt;T&gt;, Integer&gt; indexMap; //反向索引表,如果有处理重复的需求,用这样的方式</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> heapSize<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> comp<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HeapGreater</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        indexMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        heapSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        comp <span class="token operator">=</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="加强堆特殊功能"><a href="#加强堆特殊功能" class="header-anchor">#</a> 加强堆特殊功能</h3> <h4 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//提前找一个变量,装起来最后一个元素</span>
   <span class="token class-name">T</span> replace <span class="token operator">=</span> heap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>heapSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//反向索引表,找到删除的元素的位置,并且将这个反向记录删除</span>
   <span class="token keyword">int</span> index <span class="token operator">=</span> indexMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
   indexMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//从堆中删除最后一个元素,</span>
   heap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token operator">--</span>heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//如果不是删除最后一个,那么就把删除元素和最后那个元素换位置</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> replace<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      heap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> replace<span class="token punctuation">)</span><span class="token punctuation">;</span>
      indexMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>replace<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resign</span><span class="token punctuation">(</span>replace<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="某个值变了-重排"><a href="#某个值变了-重排" class="header-anchor">#</a> 某个值变了,重排</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">resign</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">heapInsert</span><span class="token punctuation">(</span>indexMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">heapify</span><span class="token punctuation">(</span>indexMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">T</span> o1 <span class="token operator">=</span> heap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">T</span> o2 <span class="token operator">=</span> heap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
   heap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> o2<span class="token punctuation">)</span><span class="token punctuation">;</span>
   heap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> o1<span class="token punctuation">)</span><span class="token punctuation">;</span>
   indexMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>o2<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
   indexMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="手动改写堆题目练习"><a href="#手动改写堆题目练习" class="header-anchor">#</a> 手动改写堆题目练习</h3> <p>给定一个整型数组，int[] arr;和一个布尔类型数组，Boolean[op],两个数组一定等长，假设长度为N，arr[i]表示客户编号，op[i]表示客户操作</p> <p>arr=【3,3,1,2,1,2,5..</p> <p>Op=【T,T,T,F,T,F...</p> <p>依次表示:3用户购买了一件商品，3用户购买了一件商品，1用户购买了一件商品，2用户购买了一件商品，1用户退货了一件商品，2用户购买了一件商品，5用户退货了一件商品·</p> <p>一对arr[]和op[]就代表一个事件;</p> <p>用户号为arr[i]，op[i]==T就代表这个用户购买了一件商品,op[i] == F就代表这个用户退货了一件商品,现在你作为电商平台负责人，你想在每一个事件到来的时候都给购买次数最多的前K名用户颁奖。所以每个事件发生后，你都需要一个得奖名单(得奖区)</p> <p>得奖系统的规则:
1,如果某个用户购买商品数为0，但是又发生了退货事件,则认为该事件无效，得奖名单和上一个事件发生后一致，例子中的5用户;</p> <p>2,某用户发生购买商品事件，购买商品数+1，发生退货事件，购买商品数-1.</p> <p>3,每次都是最多K个用户得奖，K也为传入的参数,如果根据全部规则，得奖人数确实不够K个，那就以不够的情况输出结果</p> <p>4,得奖系统分为得奖区和候选区，任何用户只要购买数&gt;0，一定在这两个区域中的一个</p> <p>5, 购买数最大的前K名用户进入得奖区,在最初时如果得奖区没有到达K个用户，那么新来的用户直接进入得奖区</p> <p>6,如果购买数不足以进入得奖区的用户，进入候选区</p> <p>7,如果候选区购买数最多的用户，已经足以进入得奖区，该用户就会替换得奖区中购买数最少的用户(大于才能替换)</p> <p>如果得奖区中购买数最少的用户有多个，就替换最早进入得奖区的用户</p> <p>如果候选区中购买数最多的用户有多个，机会会给最早进入候选区的用户</p> <p>8,候选区和得奖区是两套时间,</p> <p>因用户只会在其中一个区域，所以只会有一个区域的时间，另一个没有从得奖区出来进入候选区的用户，得奖区时间删除,</p> <p>进入候选区的时间就是当前事件的时间(可以理解为arr[i]和op中的i)从候选区出来进入得奖区的用户，候选区时间删除</p> <p>进入得奖区的时间就是当前事件的时间(可以理解为arr[i]和op中的i)</p> <p>9,如果某用户购买数==0，不管在哪个区域都离开，区域时间删除,离开是指彻底离开，哪个区域也不会找到该用户</p> <p>如果下次该用户又发生购买行为，产生&gt;0的购买数会再次根据之前规则回到某个区域中，进入区域的时间重记</p> <p>解:TopK问题.类似的还有topK个最常用的单次那个题.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/算法体系/算法新手班.html" class="prev">
        算法新手班
      </a></span> <span class="next"><a href="/算法体系/9-前缀树.html">
        前缀树（prefix tree/trie）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4bcd492b.js" defer></script><script src="/assets/js/2.8fdba881.js" defer></script><script src="/assets/js/1.54dbed7e.js" defer></script><script src="/assets/js/46.90905eb6.js" defer></script>
  </body>
</html>
